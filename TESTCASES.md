# Тест-кейсы для проверки API микросервиса

## Тест-кейсы для эндпоинта получения статистики по объявлению  
**GET `/api/2/statistic/{id}`**
### Описание эндпоинта

Эндпоинт возвращает статистику по объявлению, которая содержит число случаев перехода в контакты, количество лайков и просмотров.

Формат успешного ответа:
```json
[
    {
        "contacts": <integer>,
        "likes": <integer>,
        "viewCount": <integer>
    }
]
```

### Тест-кейсы
#### 1 — Успешное получение статистики
Предусловия: cуществует объявление с валидным ID (его я нашла в списке объявлений продавца с sellerID=1)

Шаги: выполнить запрос GET /api/2/statistic/{id} с корректным ID.

Ожидаемый результат: статус 200, массив объектов в респонсе. Каждый объект содержит данные согласно вышеупомянутому формату ответа.

#### 2 — Объявление не найдено
Предусловия: объявление с таким ID отсутствует.

Шаги: выполнить запрос GET /api/2/statistic/{id} с несуществующим ID.

Ожидаемый результат: статус 404, ответ содержит поля `result` и `status`.

#### 3 — Некорректный формат ID
Шаги: выполнить GET /api/2/statistic/1

Ожидаемый результат: статус 400, ответ содержит поля `result` и `status`.

#### 4 — Серверная ошибка
Предусловия:
Нужно передать ID, вызывающий ошибку (например, слишком длинное число).

Невозможно выполнить, так как сервис валидирует UUID и любые некорректные значения возвращают 400 Bad Request.  
Для воспроизведения реальной ошибки 500 потребовались бы внутренние сбои сервера или базы данных, которые недоступны на тестовом окружении.

---

## Тест-кейсы для эндпоинта удаления объявления  
**DELETE `/api/2/item/{id}`**

### Описание эндпоинта

Эндпоинт удаляет объявление по его идентификатору. Каждый объявление имеет уникальный ID в формате UUID.

Формат успешного ответа: пустое тело, статус 200.

### Тест-кейсы

#### 1 — Успешное удаление объявления
Предусловия: существует объявление с валидным ID.  

Шаги: выполнить DELETE /api/2/item/{id} с корректным ID.  

Ожидаемый результат: статус 200, тело ответа пустое.

#### 2 — Объявление не найдено
Предусловия: объявление с таким ID отсутствует.  

Шаги: выполнить DELETE /api/2/item/{id} с несуществующим ID.  

Ожидаемый результат: статус 404, ответ содержит поля `result` и `status`.

#### 3 — Некорректный формат ID
Шаги: выполнить DELETE /api/2/item/123  

Ожидаемый результат: статус 400, ответ содержит поля `result` и `status`.

#### 4 — Серверная ошибка
Предусловия: нужно передать ID, вызывающий ошибку на сервере.  

Невозможно выполнить, так как сервис валидирует UUID и любые некорректные значения возвращают 400 Bad Request.  
Для воспроизведения реальной ошибки 500 потребовались бы внутренние сбои сервера или базы данных, которые недоступны на тестовом окружении.

---


## Тест-кейсы для эндпоинта получения объявления по идентификатору
**GET `/api/1/item/{id}`**

### Описание эндпоинта
Эндпоинт возвращает данные конкретного объявления по его идентификатору. 

Формат успешного ответа:
```json
[
  {
    "id": "<string>",
    "sellerId": "<integer>",
    "name": "<string>",
    "price": "<integer>",
    "statistics": {
      "likes": "<integer>",
      "viewCount": "<integer>",
      "contacts": "<integer>"
    },
    "createdAt": "<string>"
  }
]
```

### Тест-кейсы
#### 1 — Успешное получение статистики
Предусловия: cуществует объявление с валидным ID (его я нашла в списке объявлений продавца с sellerID=1)

Шаги: выполнить запрос GET /api/1/statistic/{id} с корректным ID.

Ожидаемый результат: статус 200, массив объектов в респонсе. Каждый объект содержит данные согласно вышеупомянутому формату ответа.

#### 2 — Объявление не найдено
Предусловия: объявление с таким ID отсутствует.

Шаги: выполнить запрос GET /api/1/statistic/{id} с несуществующим ID.

Ожидаемый результат: статус 404, ответ содержит поля `result` и `status`.

#### 3 — Некорректный формат ID
Шаги: выполнить GET /api/1/statistic/1

Ожидаемый результат: статус 400, ответ содержит поля `result` и `status`.

#### 4 — Серверная ошибка
Предусловия:
Нужно передать ID, вызывающий ошибку (например, слишком длинное число).

Невозможно воспроизвести 500 статус без внутренних сбоев.

---

## Тест-кейсы для эндпоинта сохранения объявления
**POST `/api/1/item`**
### Описание эндпоинта

Эндпоинт сохраняет новое объявление.

Формат запроса:
```json
[
    {
        "sellerID": "<integer>",
        "name": "<string>",
        "price": "<integer>","statistics": {
        "likes": "<integer>",
        "viewCount": "<integer>","contacts": "<integer>"
    }
}
]
```

Формат успешного ответа:
```json
[
    {
        "id": "<string>",
        "sellerId": "<integer>",
        "name": "<string>",
        "price": "<integer>",
        "statistics": {
        "likes": "<integer>",
        "viewCount": "<integer>",
        "contacts": "<integer>"
        },
         "createdAt": "<string>"
    }
]
```

### Тест-кейсы
#### 1 — Успешное создание объявления
Шаги: POST /api/1/item с корректными данными.

Ожидаемый результат: статус 200, объект с полями как в формате выше.

#### 2 — Некорректные данные
Шаги: POST /api/1/item с пустыми или некорректными полями.

Ожидаемый результат: статус 400, ответ содержит поля `result` и `status`.

#### 3 — Серверная ошибка
Невозможно воспроизвести 500 без внутренних сбоев.

---

## Тест-кейсы для эндпоинта получения всех объявлений пользователя
**GET `/api/1/{sellerID}/item`**
### Описание эндпоинта

Эндпоинт возвращает список всех объявлений конкретного продавца.

Формат успешного ответа:
```json
[
  {
    "id": "<string>",
    "sellerId": "<integer>",
    "name": "<string>",
    "price": "<integer>",
    "statistics": {
      "likes": "<integer>",
      "viewCount": "<integer>",
      "contacts": "<integer>"
    },
    "createdAt": "<string>"
  }
]
```

### Тест-кейсы
#### 1 — Успешное получение списка объявлений
Шаги: GET /api/1/{sellerID}/item с существующим sellerID.

Ожидаемый результат: статус 200, массив объектов как в формате выше.

#### 2 — Некорректный sellerID
Шаги: GET /api/1/abc/item

Ожидаемый результат: статус 400, ответ содержит поля `result` и `status`.

#### 3 — Серверная ошибка
Невозможно воспроизвести 500 без внутренних сбоев.